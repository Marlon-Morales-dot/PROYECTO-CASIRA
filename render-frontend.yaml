# ============================================
# RENDER CONFIG - SERVICIO NODE.JS/REACT FRONTEND
# ============================================
# Para: proyecto-casira-1.onrender.com (Frontend Static Site)

services:
  - type: static_site
    name: casira-connect-frontend
    rootDir: apps/web
    buildCommand: |
      echo "ðŸ“¦ Building React Frontend..."
      npm ci --include=dev --no-fund --no-audit
      npm run build
      echo "Build verification:"
      ls -la dist/
      if [ -d "dist/assets" ]; then
        echo "Assets found:"
        ls -la dist/assets/
      fi
    publishDir: dist
    plan: free
    envVars:
      - key: NODE_VERSION
        value: 20.18.0
      - key: NODE_ENV
        value: production
    headers:
      - path: /*
        name: Content-Security-Policy
        value: ""
      - path: /*  
        name: Cross-Origin-Opener-Policy
        value: "unsafe-none"
      - path: /*
        name: Cross-Origin-Embedder-Policy  
        value: "unsafe-none"
      - path: /*
        name: X-Frame-Options
        value: "ALLOWALL"